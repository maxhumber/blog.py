<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIKit Brain Rot - Max Humber</title>
    <link rel="stylesheet" href="/static/highlight.css">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <main>
        <nav>
            <div class="nav-container">
                <div class="nav-left">
                    <a href="/"><img src="/static/signature.png" alt="Signature"></a>
                </div>
                <div class="nav-right">
                    <a href="https://www.goodreads.com/author/show/18086463.Max_Humber">Goodreads</a>
                    <a href="https://linkedin.com/in/maxhumber">LinkedIn</a>
                    <a href="https://twitter.com/maxhumber">X</a>
                </div>
            </div>
        </nav>
<article>
    <header>
        <h1>UIKit Brain Rot</h1>
        <time>2024-11-14</time>
        <div>
        <a href="code">#code</a>
        <a href="swift">#swift</a>
        </div>
    </header>
    <p>This is your brain on UIKit:</p>
<div class="highlight"><pre><span></span><code><span class="kd">import</span> <span class="nc">SwiftUI</span>

<span class="kd">class</span> <span class="nc">ParentCoordinator</span> <span class="p">{</span>
    <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">parentViewModel</span><span class="p">:</span> <span class="n">ParentViewModel</span><span class="p">?</span>
    <span class="kd">var</span> <span class="nv">childCoordinator</span><span class="p">:</span> <span class="n">ChildCoordinator</span><span class="p">?</span>

    <span class="kd">init</span><span class="p">(</span><span class="n">parentViewModel</span><span class="p">:</span> <span class="n">ParentViewModel</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">parentViewModel</span> <span class="p">=</span> <span class="n">parentViewModel</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">childCoordinator</span> <span class="p">=</span> <span class="n">ChildCoordinator</span><span class="p">(</span><span class="n">childViewModel</span><span class="p">:</span> <span class="n">parentViewModel</span><span class="p">.</span><span class="n">childViewModel</span><span class="p">)</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">childCoordinator</span><span class="p">?.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="nc">ParentCoordinator</span><span class="p">:</span> <span class="n">ChildCoordinatorDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">childCoordinatorDidUpdateLabelText</span><span class="p">(</span><span class="kc">_</span> <span class="n">newText</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">parentViewModel</span><span class="p">?.</span><span class="n">labelText</span> <span class="p">=</span> <span class="n">newText</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">protocol</span> <span class="nc">ChildCoordinatorDelegate</span><span class="p">:</span> <span class="nb">AnyObject</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">childCoordinatorDidUpdateLabelText</span><span class="p">(</span><span class="kc">_</span> <span class="n">newText</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">ChildCoordinator</span> <span class="p">{</span>
    <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">childViewModel</span><span class="p">:</span> <span class="n">ChildViewModel</span><span class="p">?</span>
    <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">delegate</span><span class="p">:</span> <span class="n">ChildCoordinatorDelegate</span><span class="p">?</span>

    <span class="kd">init</span><span class="p">(</span><span class="n">childViewModel</span><span class="p">:</span> <span class="n">ChildViewModel</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">childViewModel</span> <span class="p">=</span> <span class="n">childViewModel</span>
    <span class="p">}</span>

    <span class="p">@</span><span class="n">MainActor</span> <span class="kd">func</span> <span class="nf">updateText</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">childViewModel</span><span class="p">?.</span><span class="n">updateText</span><span class="p">()</span>
        <span class="n">delegate</span><span class="p">?.</span><span class="n">childCoordinatorDidUpdateLabelText</span><span class="p">(</span><span class="n">childViewModel</span><span class="p">!.</span><span class="n">labelText</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="n">Observable</span>
<span class="kd">class</span> <span class="nc">ParentViewModel</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">labelText</span><span class="p">:</span> <span class="nb">String</span>
    <span class="kd">var</span> <span class="nv">childViewModel</span><span class="p">:</span> <span class="n">ChildViewModel</span>
    <span class="kd">var</span> <span class="nv">coordinator</span><span class="p">:</span> <span class="n">ParentCoordinator</span><span class="p">?</span>

    <span class="kd">init</span><span class="p">(</span><span class="n">labelText</span><span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&quot;üê∂&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">labelText</span> <span class="p">=</span> <span class="n">labelText</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">childViewModel</span> <span class="p">=</span> <span class="n">ChildViewModel</span><span class="p">(</span><span class="n">labelText</span><span class="p">:</span> <span class="n">labelText</span><span class="p">)</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">coordinator</span> <span class="p">=</span> <span class="n">ParentCoordinator</span><span class="p">(</span><span class="n">parentViewModel</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="p">@</span><span class="n">Observable</span>
<span class="kd">class</span> <span class="nc">ChildViewModel</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">labelText</span><span class="p">:</span> <span class="nb">String</span>

    <span class="kd">init</span><span class="p">(</span><span class="n">labelText</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">labelText</span> <span class="p">=</span> <span class="n">labelText</span>
    <span class="p">}</span>

    <span class="p">@</span><span class="n">MainActor</span> <span class="kd">func</span> <span class="nf">updateText</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">labelText</span> <span class="p">=</span> <span class="s">&quot;üêà&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">ParentView</span><span class="p">:</span> <span class="n">View</span> <span class="p">{</span>
    <span class="p">@</span><span class="n">Bindable</span> <span class="kd">var</span> <span class="nv">viewModel</span><span class="p">:</span> <span class="n">ParentViewModel</span>

    <span class="kd">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">viewModel</span> <span class="p">=</span> <span class="n">ParentViewModel</span><span class="p">()</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">viewModel</span> <span class="p">=</span> <span class="n">viewModel</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
        <span class="n">VStack</span> <span class="p">{</span>
            <span class="n">VStack</span> <span class="p">{</span>
                <span class="n">Text</span><span class="p">(</span><span class="s">&quot;Parent&quot;</span><span class="p">)</span>
                <span class="n">Text</span><span class="p">(</span><span class="s">&quot;Label: </span><span class="si">\(</span><span class="n">viewModel</span><span class="p">.</span><span class="n">labelText</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="p">.</span><span class="n">padding</span><span class="p">()</span>
            <span class="p">.</span><span class="n">background</span><span class="p">(</span><span class="n">Rectangle</span><span class="p">().</span><span class="n">stroke</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">red</span><span class="p">))</span>
            <span class="n">ChildView</span><span class="p">(</span><span class="n">viewModel</span><span class="p">:</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">childViewModel</span><span class="p">,</span> <span class="n">coordinator</span><span class="p">:</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">coordinator</span><span class="p">!.</span><span class="n">childCoordinator</span><span class="p">!)</span>
        <span class="p">}</span>
        <span class="p">.</span><span class="n">padding</span><span class="p">()</span>
        <span class="p">.</span><span class="n">background</span><span class="p">(</span><span class="n">Rectangle</span><span class="p">().</span><span class="n">stroke</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">orange</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">ChildView</span><span class="p">:</span> <span class="n">View</span> <span class="p">{</span>
    <span class="p">@</span><span class="n">Bindable</span> <span class="kd">var</span> <span class="nv">viewModel</span><span class="p">:</span> <span class="n">ChildViewModel</span>
    <span class="kd">var</span> <span class="nv">coordinator</span><span class="p">:</span> <span class="n">ChildCoordinator</span>

    <span class="kd">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
        <span class="n">VStack</span> <span class="p">{</span>
            <span class="n">Text</span><span class="p">(</span><span class="s">&quot;Child&quot;</span><span class="p">)</span>
            <span class="n">Text</span><span class="p">(</span><span class="s">&quot;Label: </span><span class="si">\(</span><span class="n">viewModel</span><span class="p">.</span><span class="n">labelText</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
            <span class="n">Button</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="p">{</span>
                <span class="n">coordinator</span><span class="p">.</span><span class="n">updateText</span><span class="p">()</span>
            <span class="p">})</span> <span class="p">{</span>
                <span class="n">Text</span><span class="p">(</span><span class="s">&quot;Update&quot;</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="p">.</span><span class="n">padding</span><span class="p">()</span>
        <span class="p">.</span><span class="n">background</span><span class="p">(</span><span class="n">Rectangle</span><span class="p">().</span><span class="n">stroke</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">green</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">#</span><span class="n">Preview</span> <span class="p">{</span>
    <span class="n">ParentView</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

<p>Don't ever smoke UIKit!</p>
</article>
    </main>
</body>
</html>